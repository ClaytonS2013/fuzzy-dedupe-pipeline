# ============================================
# Fuzzy Dedupe Pipeline Environment Variables
# ============================================
# INSTRUCTIONS:
# 1. Copy this file: cp .env.template .env
# 2. Fill in your actual values in the .env file
# 3. Never commit .env to Git (it should be in .gitignore)
# ============================================

# --------------------------------------------
# REQUIRED: Google Sheets Configuration
# --------------------------------------------
# Service Account JSON from Google Cloud Console
# How to get it:
# 1. Go to Google Cloud Console > IAM & Admin > Service Accounts
# 2. Create service account or use existing
# 3. Create JSON key
# 4. Copy entire JSON content as ONE LINE (remove line breaks)
# Example format (all on one line):
GOOGLE_CREDENTIALS={"type":"service_account","project_id":"your-project","private_key_id":"key123","private_key":"-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END PRIVATE KEY-----\n","client_email":"service@project.iam.gserviceaccount.com","client_id":"123456789","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/service%40project.iam.gserviceaccount.com"}

# Google Sheet ID (from the URL)
# Example: https://docs.google.com/spreadsheets/d/1ABC-xyz123/edit
# Use: 1ABC-xyz123
SPREADSHEET_ID=your-spreadsheet-id-here

# --------------------------------------------
# REQUIRED: Supabase Configuration
# --------------------------------------------
# Get from: Supabase Dashboard > Settings > API
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-anon-public-key-here

# --------------------------------------------
# OPTIONAL: AI Enhancement (Recommended)
# --------------------------------------------
# Claude AI API for intelligent deduplication
# Get from: https://console.anthropic.com/account/keys
# Leave empty to disable AI features
ANTHROPIC_API_KEY=sk-ant-api03-your-key-here

# --------------------------------------------
# Pipeline Configuration
# --------------------------------------------
# Environment: development, staging, production
ENVIRONMENT=production

# Enable AI-powered deduplication (requires ANTHROPIC_API_KEY)
ENABLE_AI_FEATURES=true

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Processing batch size (number of records per batch)
BATCH_SIZE=100

# Similarity threshold for duplicate detection (0.0 to 1.0)
# Higher = stricter matching (fewer duplicates found)
# Lower = looser matching (more duplicates found)
SIMILARITY_THRESHOLD=0.85

# --------------------------------------------
# Scheduling Configuration (Optional)
# --------------------------------------------
# Cron schedule for automatic runs
# Examples:
#   "*/15 * * * *" = Every 15 minutes
#   "0 * * * *"    = Every hour
#   "0 */6 * * *"  = Every 6 hours
#   "0 0 * * *"    = Daily at midnight
#   "0 9 * * 1-5"  = Weekdays at 9 AM
#   ""             = Disable scheduling
SCHEDULE_CRON=0 */6 * * *

# Timezone for scheduling (e.g., America/New_York, Europe/London)
TIMEZONE=UTC

# --------------------------------------------
# Processing Limits
# --------------------------------------------
# Maximum records to process per run (0 = unlimited)
MAX_RECORDS=10000

# Maximum execution time in seconds (0 = unlimited)
MAX_EXECUTION_TIME=3600

# Memory limit for processing (e.g., 512M, 1G, 2G)
MEMORY_LIMIT=1G

# --------------------------------------------
# Data Source Configuration
# --------------------------------------------
# Google Sheets specific settings
SHEET_NAME=Sheet1
SHEET_RANGE=A:Z
SHEET_HEADER_ROW=1

# Supabase table configuration
SUPABASE_TABLE=contacts
SUPABASE_SCHEMA=public

# --------------------------------------------
# Deduplication Settings
# --------------------------------------------
# Fields to use for matching (comma-separated)
MATCH_FIELDS=name,email,phone,address

# Fields to exclude from comparison
EXCLUDE_FIELDS=id,created_at,updated_at

# Merge strategy: keep_first, keep_last, keep_most_complete, ai_merge
MERGE_STRATEGY=keep_most_complete

# --------------------------------------------
# AI Model Configuration (Advanced)
# --------------------------------------------
# Sentence transformer model for embeddings
MODEL_NAME=all-MiniLM-L6-v2

# Model cache directory
MODEL_CACHE_DIR=/app/models

# Claude model version
CLAUDE_MODEL=claude-3-sonnet-20240229

# AI temperature (0.0 to 1.0, lower = more consistent)
AI_TEMPERATURE=0.1

# --------------------------------------------
# Notification Settings (Optional)
# --------------------------------------------
# Webhook for notifications (Slack, Discord, etc.)
# WEBHOOK_URL=https://hooks.slack.com/services/T00/B00/XXX

# Email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# NOTIFY_EMAIL=admin@example.com

# --------------------------------------------
# Performance Tuning
# --------------------------------------------
# Number of parallel workers
WORKERS=4

# Database connection pool
DB_POOL_MIN=1
DB_POOL_MAX=10
DB_POOL_TIMEOUT=30

# Request timeout in seconds
REQUEST_TIMEOUT=60

# Retry configuration
MAX_RETRIES=3
RETRY_DELAY=5

# --------------------------------------------
# Debug and Development
# --------------------------------------------
# Enable debug mode (verbose logging)
DEBUG=false

# Enable profiling
ENABLE_PROFILING=false

# Save intermediate results
SAVE_INTERMEDIATE=false

# Dry run mode (don't save changes)
DRY_RUN=false

# --------------------------------------------
# Feature Flags
# --------------------------------------------
# Enable experimental features
ENABLE_EXPERIMENTAL=false

# Enable caching
ENABLE_CACHE=true

# Cache TTL in seconds
CACHE_TTL=3600

# Enable metrics collection
ENABLE_METRICS=true

# Enable audit logging
ENABLE_AUDIT_LOG=true

# --------------------------------------------
# Security Settings
# --------------------------------------------
# API rate limiting (requests per minute)
RATE_LIMIT=60

# Enable HTTPS only
HTTPS_ONLY=true

# CORS allowed origins (comma-separated)
CORS_ORIGINS=*

# Session timeout in minutes
SESSION_TIMEOUT=30

# --------------------------------------------
# Custom Variables (Add your own as needed)
# --------------------------------------------
# CUSTOM_VAR_1=value1
# CUSTOM_VAR_2=value2
